# Rime Dict Manager
> rime词典管理器，通过TUI呈现，可对词库进行修改、删词、加词、查询。
> 配合Rime的重新部署指令，可实现`修改既生效`的效果

## 演示
### 加词
![加词](.assets/rimedm_加词.gif)
### 修改
![修改](.assets/rimedm_修改.gif)
### 删词
![删词](.assets/rimedm_删词.gif)

## 安装

### 通过一键脚本安装
#### Windows (可能需要PowerShell 5.1版本以上，从微软应用商店中下载最新的PowerShell)
复制以下代码，打开PowerShell并粘贴
```shell
iwr https://github.com/MapoMagpie/rimedm/raw/main/install.ps1 -useb | iex
```
#### Lnux/MacOs
```shell
curl -fsSL https://github.com/MapoMagpie/rimedm/raw/main/install.sh | bash -s
```
### 手动安装
#### Windows
1. 从发布页中下载最新的`rimedm_Windows_x86_64.zip`， [https://github.com/MapoMagpie/rimedm/releases](https://github.com/MapoMagpie/rimedm/releases) 。
2. 解压文件，文件中包含`rimedm.exe`。
3. 你可以在解压后的文件夹中打开终端，直接通过`.\rimedm.exe`运行本程序，程序会从小狼毫默认的用户目录中读取你的输入方案。
4. 你也可以将`rimedm.exe`移动至某个目录中，如:`%Appdata%\rimedm\`，并将该目录添加到环境变量Path中，之后便可以直接在终端中输入`rimedm`运行程序。
#### Lnux/MacOs
1. 从发布页中下载最新的`rimedm_Linux_x86_64.tar.gz`或`rimedm_Darwin_x86_64.tar.gz`， [https://github.com/MapoMagpie/rimedm/releases](https://github.com/MapoMagpie/rimedm/releases) 。
2. 将其解压到常见的用户程序目录中，比如: `~/.local/bin`或`/usr/bin/`。
3. 输入命令`rimedm`即可。

## 配置
> rimedm会根据Rime的相关配置自动生成一份自身所需的配置文件来达到开箱即用的效果。<br>
> 但也有可能存在系统环境的不同，导致无法自动指定主词典文件。<br>
> 此时需要你在配置文件中修改dict_paths的位置。<br>
> 默认的配置文件根据不同的系统所在位置为：<br>
> Windows:  `%APPDATA%\rimedm\config.yaml`<br>
> Linux:    `$HOME/.config/rimedm/config.yaml`<br>
> Windows:  `%APPDATA%\rimedm\config.yaml`<br>

```yaml
# Rime Dict Manager config file
# This file is generated by rime-dict-manager.

# dict_paths 是主词典文件的路径，本程序会自动加载主词典所引用的其他拓展词典。
# 支持多个主词典，注意是主词典，请不要将主词典与其所属拓展词典一同写在dict_paths:下
# 在Linux + Fcitx5 + Fcitx5-Rime下，词典的路径一般是: $HOME/.local/share/fcitx5/rime/方案名.dict.yaml
# 在Windows + 小狼毫下，词典的路径一般是: %Appdata%/rime/方案名.dict.yaml
#dict_paths:
#	- 主词典1文件路径
#	- 主词典2文件路径
# 禁止
#	- 主词典1下的拓展词典文件路径
dict_paths:
  - $HOME/.local/share/fcitx5/rime/xkjd6.dict.yaml

# user_path 是用户词典路径，可以为空，
#	当指定了用户词典时，在添加新词时，用户词典会作为优先的添加选项。
#	如果没有指定用户词典，你也可以在添加时的选项中选择用户词典或其他词典。
#user_path: 

# 是否在每次添加、删除、修改时立即同步到词典文件，默认为 true
sync_on_change: true
# 在同步词典文件时，通过这个命令来重启 rime, 不同的系统环境下需要不同的命令。
# 在Linux + Fcitx5 下可通过此命令来重启 rime: 
#	dbus-send --session --print-reply --dest=org.fcitx.Fcitx5 /controller org.fcitx.Fcitx.Controller1.SetConfig string:'fcitx://config/addon/rime' variant:string:''
# 在Windows + 小狼毫 下可通过此命令来重启 rime(注意程序版本): 
#	C:\PROGRA~2\Rime\weasel-0.14.3\WeaselDeployer.exe /deploy
#	注:PROGRA~2 = Program Files (x86) PROGRA~1 = Program Files
restart_rime_cmd: dbus-send --session --print-reply --dest=org.fcitx.Fcitx5 /controller org.fcitx.Fcitx.Controller1.SetConfig string:'fcitx://config/addon/rime' variant:string:''
```

### 通过参数运行rimedm
示例
```shell
rimedm -d 词典文件
```
完整的参数使用
```shell
Usage of rimedm:
  -c string
    	(可选)配置文件路径，默认位置:$HOME/.config/rimedm/config.yaml (default "$HOME/.config/rimedm/config.yaml")
  -cmd string
    	(可选)同步到词典文件后，用于重新部署rime的命令，使更改即时生效，不同的系统环境下需要不同的命令
  -d value
    	(当使用配置文件时可选)主词典文件(方案名.dict.yaml)路径，通过主词典会自动加载其他拓展词典，无需指定拓展词典。
    	支持多个主词典文件，e.g: rimedm -d ./xkjd6.dict.yaml -d ./xhup.dict.txt
  -sync
    	(可选)是否在每次添加、删除、修改时立即同步到词典文件，默认为 true (default true)
  -u string
    	(可选)用户词典路径
  -v	显示版本号
```
